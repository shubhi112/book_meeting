<p-button (click)="showDialog()" icon="pi pi-external-link" label="New Booking"></p-button>
<p-dialog header="New Booking" [(visible)]="visible" [modal]="true" [style]="{ width: '50vw', height: '100vh' }"
    [draggable]="false" [resizable]="false">
    <form [formGroup]="bookingForm" (ngSubmit)="createBooking()">
        <div>
            <input type="text" pInputText formControlName="username" placeholder="Username" />
            <div *ngIf="bookingForm.get('username')?.invalid && bookingForm.get('username')?.touched">
                Username is required.
            </div>
        </div>
        <div>
            <p-calendar formControlName="date" dateFormat="dd/mm/yy"></p-calendar>
            <div *ngIf="bookingForm.get('date')?.invalid && bookingForm.get('date')?.touched">
                Date is required.
            </div>
        </div>
        <div>
            <p-calendar formControlName="startTime" [showTime]="true" [timeOnly]="true"></p-calendar>
            <div *ngIf="bookingForm.get('startTime')?.invalid && bookingForm.get('startTime')?.touched">
                Start Time is required.
            </div>
        </div>
        <div>
            <p-calendar formControlName="endTime" [showTime]="true" [timeOnly]="true"></p-calendar>
            <div *ngIf="bookingForm.get('endTime')?.invalid && bookingForm.get('endTime')?.touched">
                End Time is required and should be at least 30 minutes after Start Time.
            </div>
        </div>
        <div>
            <input type="text" pInputText formControlName="agenda" placeholder="Agenda" />
            <div *ngIf="bookingForm.get('agenda')?.invalid && bookingForm.get('agenda')?.touched">
                Agenda is required.
            </div>
        </div>
        <div>

            <button type="button" (click)="searchAvailableRooms()">Search Available Rooms</button>
            <div *ngIf="availableRooms.length > 0">
                <p-dropdown formControlName="roomNo" [options]="availableRooms" placeholder="Select Meeting Room">
                </p-dropdown>
                <div *ngIf="bookingForm.get('roomNo')?.invalid && bookingForm.get('roomNo')?.touched">
                    Meeting Room is required.
                </div>
            </div>
            <div *ngIf="availableRooms.length < 0">
                No rooms available.
            </div>

        </div>
        <button pButton type="submit" label="Book Meeting"></button>

    </form>
</p-dialog>
<p-table [value]="bookings" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template pTemplate="header">
        <tr>
            <th>Sr No.</th>
            <th>Username</th>
            <th>Agenda</th>
            <th>Date</th>
            <th>Time</th>
            <th>Room</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-booking>
        <tr>
            <td>{{ booking.id }}</td>
            <td>{{ booking.username }}</td>
            <td>{{ booking.agenda }}</td>
            <td>{{ booking.date }}</td>
            <td>{{ booking.startTime}} - {{ booking.endTime }}</td>
            <td>{{ booking.roomNo }}</td>
        </tr>
    </ng-template>
</p-table>